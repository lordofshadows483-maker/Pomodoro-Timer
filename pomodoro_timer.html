<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pomodoro Timer</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-red-50 to-orange-100">
    <div class="container mx-auto p-6 max-w-2xl">
        <h1 class="text-4xl font-bold text-gray-800 mb-2 text-center">üçÖ Pomodoro Timer</h1>
        <p class="text-gray-600 mb-8 text-center">Stay focused and productive</p>

        <div class="bg-white rounded-lg shadow-2xl p-8 mb-6">
            <!-- Timer Display -->
            <div class="text-center mb-8">
                <div class="mb-4">
                    <span id="mode-display" class="inline-block bg-red-100 text-red-800 px-4 py-2 rounded-full font-semibold">
                        Work Session
                    </span>
                </div>
                <div id="timer-display" class="text-8xl font-bold text-gray-800 mb-4 font-mono">
                    25:00
                </div>
                <div id="session-count" class="text-gray-600 mb-6">
                    Session 1 of 4
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="w-full bg-gray-200 rounded-full h-3 mb-8">
                <div id="progress-bar" class="bg-red-500 h-3 rounded-full transition-all duration-1000" style="width: 0%"></div>
            </div>

            <!-- Controls -->
            <div class="flex justify-center gap-4 mb-8">
                <button onclick="startTimer()" id="start-btn" class="bg-green-600 text-white px-8 py-3 rounded-lg hover:bg-green-700 font-semibold text-lg">
                    ‚ñ∂ Start
                </button>
                <button onclick="pauseTimer()" id="pause-btn" class="bg-yellow-600 text-white px-8 py-3 rounded-lg hover:bg-yellow-700 font-semibold text-lg" disabled>
                    ‚è∏ Pause
                </button>
                <button onclick="resetTimer()" class="bg-red-600 text-white px-8 py-3 rounded-lg hover:bg-red-700 font-semibold text-lg">
                    ‚Üª Reset
                </button>
            </div>

            <!-- Settings -->
            <div class="border-t pt-6">
                <h3 class="font-semibold text-gray-700 mb-4">Settings</h3>
                <div class="grid grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm text-gray-600 mb-2">Work (min)</label>
                        <input type="number" id="work-duration" value="25" min="1" max="60" 
                            class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500">
                    </div>
                    <div>
                        <label class="block text-sm text-gray-600 mb-2">Short Break (min)</label>
                        <input type="number" id="short-break" value="5" min="1" max="30" 
                            class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500">
                    </div>
                    <div>
                        <label class="block text-sm text-gray-600 mb-2">Long Break (min)</label>
                        <input type="number" id="long-break" value="15" min="1" max="60" 
                            class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500">
                    </div>
                </div>
                <div class="mt-4">
                    <label class="flex items-center">
                        <input type="checkbox" id="auto-start" class="mr-2">
                        <span class="text-sm text-gray-700">Auto-start next session</span>
                    </label>
                    <label class="flex items-center mt-2">
                        <input type="checkbox" id="sound-enabled" checked class="mr-2">
                        <span class="text-sm text-gray-700">Enable sound notifications</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Statistics -->
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h3 class="font-semibold text-gray-800 mb-4">Today's Statistics</h3>
            <div class="grid grid-cols-3 gap-4">
                <div class="text-center">
                    <div class="text-3xl font-bold text-red-600" id="completed-sessions">0</div>
                    <div class="text-sm text-gray-600">Completed</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-blue-600" id="focus-time">0</div>
                    <div class="text-sm text-gray-600">Minutes</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-green-600" id="break-time">0</div>
                    <div class="text-sm text-gray-600">Break Minutes</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let timeLeft;
        let totalTime;
        let timerInterval;
        let isRunning = false;
        let currentMode = 'work'; // work, shortBreak, longBreak
        let currentSession = 1;
        let completedSessions = 0;
        let totalFocusTime = 0;
        let totalBreakTime = 0;

        function loadStats() {
            const today = new Date().toDateString();
            const saved = localStorage.getItem('pomodoroStats');
            if (saved) {
                const stats = JSON.parse(saved);
                if (stats.date === today) {
                    completedSessions = stats.completed || 0;
                    totalFocusTime = stats.focusTime || 0;
                    totalBreakTime = stats.breakTime || 0;
                    updateStatsDisplay();
                }
            }
        }

        function saveStats() {
            const today = new Date().toDateString();
            localStorage.setItem('pomodoroStats', JSON.stringify({
                date: today,
                completed: completedSessions,
                focusTime: totalFocusTime,
                breakTime: totalBreakTime
            }));
        }

        function updateStatsDisplay() {
            document.getElementById('completed-sessions').textContent = completedSessions;
            document.getElementById('focus-time').textContent = totalFocusTime;
            document.getElementById('break-time').textContent = totalBreakTime;
        }

        function initTimer() {
            const workMinutes = parseInt(document.getElementById('work-duration').value);
            timeLeft = workMinutes * 60;
            totalTime = timeLeft;
            updateDisplay();
            updateProgressBar();
        }

        function updateDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timer-display').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Update mode display
            const modeText = {
                work: 'Work Session',
                shortBreak: 'Short Break',
                longBreak: 'Long Break'
            };
            const modeColors = {
                work: 'bg-red-100 text-red-800',
                shortBreak: 'bg-blue-100 text-blue-800',
                longBreak: 'bg-green-100 text-green-800'
            };
            const modeDisplay = document.getElementById('mode-display');
            modeDisplay.textContent = modeText[currentMode];
            modeDisplay.className = `inline-block px-4 py-2 rounded-full font-semibold ${modeColors[currentMode]}`;
            
            document.getElementById('session-count').textContent = `Session ${currentSession} of 4`;
            
            // Update progress bar color
            const progressBar = document.getElementById('progress-bar');
            const barColors = {
                work: 'bg-red-500',
                shortBreak: 'bg-blue-500',
                longBreak: 'bg-green-500'
            };
            progressBar.className = `h-3 rounded-full transition-all duration-1000 ${barColors[currentMode]}`;
        }

        function updateProgressBar() {
            const progress = ((totalTime - timeLeft) / totalTime) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
        }

        function startTimer() {
            if (isRunning) return;
            
            isRunning = true;
            document.getElementById('start-btn').disabled = true;
            document.getElementById('pause-btn').disabled = false;
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateDisplay();
                updateProgressBar();
                
                if (timeLeft <= 0) {
                    completeSession();
                }
            }, 1000);
        }

        function pauseTimer() {
            isRunning = false;
            clearInterval(timerInterval);
            document.getElementById('start-btn').disabled = false;
            document.getElementById('pause-btn').disabled = true;
        }

        function resetTimer() {
            pauseTimer();
            currentMode = 'work';
            currentSession = 1;
            initTimer();
        }

        function completeSession() {
            pauseTimer();
            playSound();
            
            // Update statistics
            if (currentMode === 'work') {
                completedSessions++;
                totalFocusTime += parseInt(document.getElementById('work-duration').value);
                saveStats();
                updateStatsDisplay();
            } else {
                const breakMinutes = currentMode === 'shortBreak' 
                    ? parseInt(document.getElementById('short-break').value)
                    : parseInt(document.getElementById('long-break').value);
                totalBreakTime += breakMinutes;
                saveStats();
                updateStatsDisplay();
            }
            
            // Move to next session
            if (currentMode === 'work') {
                if (currentSession % 4 === 0) {
                    currentMode = 'longBreak';
                } else {
                    currentMode = 'shortBreak';
                }
            } else {
                currentMode = 'work';
                if (currentMode === 'work' && currentSession < 4) {
                    currentSession++;
                } else if (currentSession >= 4) {
                    currentSession = 1;
                }
            }
            
            startNextSession();
        }

        function startNextSession() {
            const durations = {
                work: parseInt(document.getElementById('work-duration').value),
                shortBreak: parseInt(document.getElementById('short-break').value),
                longBreak: parseInt(document.getElementById('long-break').value)
            };
            
            timeLeft = durations[currentMode] * 60;
            totalTime = timeLeft;
            updateDisplay();
            updateProgressBar();
            
            const autoStart = document.getElementById('auto-start').checked;
            if (autoStart) {
                setTimeout(() => startTimer(), 2000);
            }
        }

        function playSound() {
            if (!document.getElementById('sound-enabled').checked) return;
            
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 800;
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
        }

        // Initialize
        loadStats();
        initTimer();
    </script>
</body>
</html>